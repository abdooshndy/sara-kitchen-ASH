<!-- admin-dashboard.html -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>لوحة تحكم الأدمن - مطبخ سارة</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
</head>

<body data-page="admin-dashboard">
  <header class="header">
    <div class="header-inner">
      <div class="header-logo">مطبخ سارة - أدمن</div>
      <nav class="header-nav">
        <a href="admin-dashboard.html" class="header-link header-link--primary">الرئيسية</a>
        <button id="admin-logout-btn" class="header-link"
          style="background:none; border:none; cursor:pointer; font-family:inherit;">تسجيل خروج</button>
      </nav>
    </div>
  </header>

  <main class="main-container">
    <section class="section">
      <h1 class="page-title">لوحة تحكم الأدمن</h1>
      <!-- Metrics can be dynamic later -->
      <div class="grid grid-2"
        style="margin-top: 1rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
        <div class="card">
          <div class="card-title">طلبات اليوم</div>
          <div class="card-price" id="admin-metric-orders-today">-</div>
        </div>
        <div class="card">
          <div class="card-title">مبيعات اليوم</div>
          <div class="card-price" id="admin-metric-sales-today">-</div>
        </div>
      </div>
    </section>

    <!-- Tabs Navigation -->
    <div class="tabs-nav"
      style="display: flex; gap: 1rem; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; padding-bottom: 0.5rem;">
      <button class="tab-btn active" data-target="orders-section"
        style="background: none; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; padding: 0.5rem 1rem; border-bottom: 3px solid transparent;">الطلبات</button>
      <button class="tab-btn" data-target="products-section"
        style="background: none; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; padding: 0.5rem 1rem; border-bottom: 3px solid transparent;">المنتجات
        والتصنيفات</button>
      <button class="tab-btn" data-target="users-section"
        style="background: none; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; padding: 0.5rem 1rem; border-bottom: 3px solid transparent;">المستخدمين</button>
    </div>

    <!-- Orders Section -->
    <section id="orders-section" class="tab-content active">
      <h2 class="section-title">الطلبات الأخيرة</h2>
      <div id="admin-orders-container" class="orders-grid">
        <!-- سيتم تحميل الطلبات هنا -->
      </div>
    </section>

    <!-- Users Section -->
    <section id="users-section" class="tab-content" style="display: none;">
      <h2 class="section-title">إدارة المستخدمين والصلاحيات</h2>
      <div id="admin-users-container" class="orders-grid">
        <!-- سيتم تحميل المستخدمين هنا -->
      </div>
    </section>

    <!-- Products & Categories Section -->
    <section id="products-section" class="tab-content" style="display: none;">

      <!-- Sub Tabs -->
      <div class="sub-tabs-nav" style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
        <button class="sub-tab-btn active btn btn-outline" data-target="sub-products">قائمة المنتجات</button>
        <button class="sub-tab-btn btn btn-outline" data-target="sub-categories">قائمة التصنيفات</button>
      </div>

      <!-- Sub Section: Products -->
      <div id="sub-products" class="sub-tab-content active">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 class="section-title">المنتجات</h3>
          <button id="add-product-btn" class="btn btn-primary">➕ إضافة منتج</button>
        </div>
        <div id="admin-products-container" class="orders-grid"></div>
      </div>

      <!-- Sub Section: Categories -->
      <div id="sub-categories" class="sub-tab-content" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 class="section-title">التصنيفات</h3>
          <button id="add-category-btn" class="btn btn-primary">➕ إضافة تصنيف</button>
        </div>
        <div id="admin-categories-container" class="orders-grid"></div>
      </div>

    </section>
  </main>

  <!-- Modal for Order Details -->
  <div id="order-details-modal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" id="close-modal-btn">&times;</button>
      <h2 class="modal-title">تفاصيل الطلب</h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <!-- Modal for Product Add/Edit -->
  <div id="product-modal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" id="close-product-modal-btn">&times;</button>
      <h2 class="modal-title" id="product-modal-title">إضافة منتج</h2>
      <form id="product-form" style="display: flex; flex-direction: column; gap: 1rem;">
        <input type="hidden" id="product-id">

        <div class="form-group">
          <label for="product-name">اسم المنتج</label>
          <input type="text" id="product-name" class="form-input" required>
        </div>

        <div class="form-group">
          <label for="product-price">السعر (ج.م)</label>
          <input type="number" id="product-price" class="form-input" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="product-category">التصنيف</label>
          <select id="product-category" class="form-input" required>
            <!-- سيتم تحميل التصنيفات هنا ديناميكياً -->
          </select>
        </div>

        <div class="form-group">
          <label for="product-desc">الوصف</label>
          <textarea id="product-desc" class="form-input" rows="3"></textarea>
        </div>

        <div class="form-group" style="display: flex; align-items: center; gap: 0.5rem;">
          <input type="checkbox" id="product-available" checked>
          <label for="product-available">متاح للطلب</label>
        </div>

        <button type="submit" class="btn btn-primary">حفظ</button>
      </form>
    </div>
  </div>

  <!-- Modal for Category Add/Edit -->
  <div id="category-modal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" id="close-category-modal-btn">&times;</button>
      <h2 class="modal-title" id="category-modal-title">إضافة تصنيف</h2>
      <form id="category-form" style="display: flex; flex-direction: column; gap: 1rem;">
        <input type="hidden" id="category-id">

        <div class="form-group">
          <label for="category-name">اسم التصنيف</label>
          <input type="text" id="category-name" class="form-input" required>
        </div>

        <button type="submit" class="btn btn-primary">حفظ</button>
      </form>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
      <div>© 2025 مطبخ سارة</div>
      <div>لوحة تحكم الإدارة</div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="toast.js"></script>
  <script src="auth-guard.js"></script>
  <script src="admin.js"></script>
</body>

</html>