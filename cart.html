<!-- cart.html -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>ุงูุณูุฉ - ูุทุจุฎ ุณุงุฑุฉ ููุฃูู ุงูุจูุชู</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="mobile.css" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <!-- Leaflet CSS for interactive maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>

<body data-page="cart">
  <!-- ุงูููุฏุฑ -->
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="header-logo">
        <img src="logo-sara-kitchen.png" alt="ุดุนุงุฑ ูุทุจุฎ ุณุงุฑุฉ ููุฃูู ุงูุจูุชู" class="header-logo-img" />
        <span class="header-logo-text">ูุทุจุฎ ุณุงุฑุฉ ููุฃูู ุงูุจูุชู</span>
      </a>

      <nav class="header-nav">
        <a href="index.html" class="header-link">ุงูุฑุฆูุณูุฉ</a>
        <a href="menu.html" class="header-link">ุงููุงุฆูุฉ</a>
        <a href="cart.html" class="header-link header-link--primary">ุงูุณูุฉ</a>
        <a href="track.html" class="header-link">ุชุชุจุน ุทูุจ</a>
        <a href="my-orders.html" class="header-link">ุทูุจุงุชู</a>
        <a href="profile.html" class="header-link">ุญุณุงุจู</a>
        <a href="customer-login.html" class="header-link">ุชุณุฌูู ุงูุฏุฎูู</a>
      </nav>
    </div>
  </header>

  <main class="main-container">
    <!-- ุนููุงู ุงูุณูุฉ -->
    <section class="section cart-header">
      <h1 class="page-title">ุงูุณูุฉ</h1>
      <p class="cart-header-desc">
        ุฑุงุฌูุน ุทูุจูุ ุงุฎุชุงุฑ ููุน ุงูุชูุตููุ ูุฃููู ุจูุงูุงุชู ูุชุฃููุฏ ุงูุทูุจ.
      </p>
    </section>

    <section class="section cart-layout">
      <!-- ูุงุฆูุฉ ุงูุนูุงุตุฑ -->
      <div class="cart-main">
        <section class="cart-section">
          <h2 class="cart-section-title">ูุญุชููุงุช ุงูุณูุฉ</h2>
          <div id="cart-items-container">
            <div class="menu-placeholder">
              ูุชู ุชุญููู ูุญุชููุงุช ุงูุณูุฉ ูู ูุชุตููุญู...
            </div>
          </div>
        </section>
      </div>

      <!-- ููุฎูุต + ุจูุงูุงุช ุงูุนููู -->
      <aside class="cart-sidebar">
        <section class="card cart-summary-card">
          <h2 class="cart-section-title">ุชูุงุตูู ุงูุชูุตูู ูุงูุฅุฌูุงูู</h2>

          <div class="cart-delivery-options">
            <label class="cart-radio">
              <input type="radio" name="delivery-type" value="PICKUP" checked />
              <span>ุงุณุชูุงู ูู ุงููุทุจุฎ (ุจุฏูู ุฑุณูู ุชูุตูู)</span>
            </label>
            <label class="cart-radio">
              <input type="radio" name="delivery-type" value="DELIVERY_INSIDE_CITY" />
              <span>ุชูุตูู ุฏุงุฎู ุงููุฏููุฉ</span>
            </label>
            <label class="cart-radio">
              <input type="radio" name="delivery-type" value="DELIVERY_OUTSIDE_CITY" />
              <span>ุชูุตูู ุฎุงุฑุฌ ุงููุฏููุฉ</span>
            </label>
          </div>

          <!-- ูุณู ุชูููุช ุงูุทูุจ ุงูุฌุฏูุฏ -->
          <div class="cart-scheduling-options" style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
            <h3 class="cart-section-subtitle" style="font-size: 16px; margin-bottom: 10px;">ุชูููุช ุงูุทูุจ</h3>
            <label class="cart-radio">
              <input type="radio" name="order-timing" value="ASAP" checked />
              <span>ูู ุฃูุฑุจ ููุช ูููู</span>
            </label>
            <label class="cart-radio">
              <input type="radio" name="order-timing" value="SCHEDULED" />
              <span>ุชุญุฏูุฏ ููุช ูุงุญู</span>
            </label>

            <div id="scheduled-time-container" style="display: none; margin-top: 10px;">
              <label for="scheduled-date" style="display: block; margin-bottom: 5px; font-size: 14px;">ุงุฎุชุฑ ุงูุชุงุฑูุฎ
                ูุงูููุช:</label>
              <input type="datetime-local" id="scheduled-date" class="cart-input"
                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
              <p class="input-hint" style="font-size: 12px; color: #666; margin-top: 4px;">ูุชุงุญ ุงูุญุฌุฒ ุฎูุงู ุณุงุนุงุช ุงูุนูู
                (12 ุธูุฑุงู - 10 ูุณุงุกู)</p>
            </div>
          </div>

          <div class="cart-totals">
            <div class="cart-total-row">
              <span>ุฅุฌูุงูู ุงูุฃุตูุงู</span>
              <span id="cart-subtotal-value">0 ุฌ.ู</span>
            </div>
            <div class="cart-total-row">
              <span>ุฑุณูู ุงูุชูุตูู</span>
              <span id="cart-delivery-fee-value">0 ุฌ.ู</span>
            </div>
            <div class="cart-total-row">
              <span>ุงูุฎุตู</span>
              <span id="cart-discount-value">0 ุฌ.ู</span>
            </div>
            <div class="cart-total-row cart-total-row--emphasis">
              <span>ุงูุฅุฌูุงูู ุงููุทููุจ</span>
              <span id="cart-total-value">0 ุฌ.ู</span>
            </div>
          </div>
        </section>

        <section class="cart-customer-details">
          <h2 class="cart-section-title">ุจูุงูุงุช ุงูุชูุตูู</h2>

          <!-- ุฑุณุงูุฉ ููุฒูุงุฑ -->
          <div id="guest-checkout-alert"
            style="display: none; background: #fff3cd; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 0.9rem; color: #856404;">
            ูุฏูู ุญุณุงุจุ <a href="customer-login.html" style="font-weight: bold; text-decoration: underline;">ุณุฌู ุฏุฎูู</a>
            ุนุดุงู ุชุณุชุฎุฏู ุนูุงูููู ุงููุญููุธุฉ ูุชุฌูุน ููุงุท!
          </div>

          <div class="cart-input-group">
            <label for="cart-customer-name">ุงูุงุณู</label>
            <input type="text" id="cart-customer-name" class="cart-input" placeholder="ุงุณูู ุจุงููุงูู" />
          </div>

          <div class="cart-input-group">
            <label for="cart-customer-phone">ุฑูู ุงูููุจุงูู</label>
            <input type="tel" id="cart-customer-phone" class="cart-input" placeholder="01xxxxxxxxx" />
          </div>

          <!-- ูุณู ุงุฎุชูุงุฑ ุงูุนููุงู (ูููุณุฌููู) -->
          <div id="saved-addresses-container" class="cart-input-group" style="display: none;">
            <label for="saved-address-select">ุงุฎุชุฑ ุนููุงู ูุญููุธ</label>
            <select id="saved-address-select" class="cart-input" style="background-color: #fff;">
              <option value="">-- ุงุฎุชุฑ ุนููุงู --</option>
            </select>
            <div style="margin-top: 5px; font-size: 0.85rem;">
              <a href="#" id="use-new-address-link" style="color: #8d4b2b;">ุฃู ุงุณุชุฎุฏู ุนููุงู ุฌุฏูุฏ</a>
            </div>
          </div>

          <!-- ุญูู ุงูุนููุงู ุงููุฏูู (ููุฒูุงุฑ ุฃู ุนููุงู ุฌุฏูุฏ) -->
          <div id="manual-address-container" class="cart-input-group">
            <label for="cart-customer-address">ุงูุนููุงู ุจุงูุชูุตูู</label>
            <textarea id="cart-customer-address" class="cart-input" rows="2"
              placeholder="ุงูููุทูุฉุ ุงูุดุงุฑุนุ ุฑูู ุงูุนูุงุฑุฉุ ุฑูู ุงูุดูุฉ..."></textarea>
            <!-- ุฒุฑ ุชุญุฏูุฏ ุงููููุน ุนูู ุงูุฎุฑูุทุฉ -->
            <button type="button" id="open-map-btn" class="btn btn-outline" style="margin-top: 0.5rem;">
              ๐ ุชุญุฏูุฏ ุงููููุน ุนูู ุงูุฎุฑูุทุฉ
            </button>
            <small id="location-status" style="color: #27ae60; display: none; margin-top: 0.25rem;">
              โ ุชู ุชุญุฏูุฏ ุงููููุน ุจูุฌุงุญ
            </small>
          </div>

          <div class="cart-input-group">
            <label for="cart-notes">ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
            <textarea id="cart-notes" class="cart-input" rows="2" placeholder="ูุซุงู: ุจุฏูู ุดุทุฉุ ุฑู ุงูุฌุฑุณ..."></textarea>
          </div>
        </section>
        <button type="button" class="btn btn-primary cart-submit-btn" id="cart-place-order-btn">
          ุชุฃููุฏ ุงูุทูุจ
        </button>
    </section>
    </aside>
    </section>
  </main>

  <!-- Map Modal -->
  <div id="map-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content" style="max-width: 800px; width: 90%;">
      <button class="modal-close" id="close-map-modal-btn">&times;</button>
      <h2 class="modal-title">ุญุฏุฏ ูููุน ุงูุชูุตูู ุงูุฏููู ๐</h2>
      <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
        ุญุฑูู ุงูุฏุจูุณ ๐ ุนูู ุงูุฎุฑูุทุฉ ููููุงู ุงูุฏููู ุฃู ุงูุชุจ ุงูุนููุงู ููุจุญุซ
      </p>

      <!-- Search box -->
      <div style="margin-bottom: 1rem;">
        <input type="text" id="map-search-input" class="cart-input" placeholder="ุงุจุญุซ ุนู ุงูุนููุงู...">
        <button id="map-search-btn" class="btn btn-outline" style="margin-top: 0.5rem;">
          ๐ ุจุญุซ
        </button>
      </div>

      <!-- Map container -->
      <div id="map-container" style="height: 400px; width: 100%; border-radius: 8px; margin-bottom: 1rem;"></div>

      <!-- Confirm button -->
      <button id="confirm-location-btn" class="btn btn-primary" style="width: 100%;">
        โ ุชุฃููุฏ ุงููููุน
      </button>
    </div>
  </div>

  <!-- ุงูููุชุฑ -->
  <footer class="footer">
    <div class="footer-inner">
      <div>ยฉ 2025 ูุทุจุฎ ุณุงุฑุฉ ููุฃูู ุงูุจูุชู โ ูู ุงูุญููู ูุญููุธุฉ</div>
      <div>ุงูุชุนุงูู ุจุงูุฌููู ุงููุตุฑู (ุฌ.ู)</div>
    </div>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha384-puJ8QoExKz32aaDWkN4WYnJXPY3VLJXSk3xATRn4hjcJYxHE62vZ6V/ ฺฉู1o1y5v5VhgXB" crossorigin=""></script>

  <!-- ุงูุชุฑุชูุจ ููู: Supabase ุซู config ุซู app -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- ููู ุงูุชููุฆุฉ -->
  <script src="config.js"></script>
  <script src="toast.js"></script>
  <script src="auth-customer.js"></script>
  <script src="mobile-detect.js"></script>
  <!-- ููู ุงูุฌุงูุงุณูุฑุจุช ุงูุฑุฆูุณู ูููุดุฑูุน -->
  <script src="ai-chat.js"></script>
  <script src="app.js"></script>
</body>

</html>